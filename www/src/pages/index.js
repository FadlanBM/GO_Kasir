import Head from "next/head";
import {
  Container,
  Heading,
  Table,
  Tbody,
  Td,
  Th,
  Thead,
  Tr,
  Spinner,
} from "@chakra-ui/react";
import { GetKaryawan } from "@/features/Karyawan/fetchKaryawan";

export default function Home() {
  const { data: karyawans, isLoading: loading } = GetKaryawan();

  const renderKaryawan = () => {
    return karyawans?.data.data.map((karyawan) => (
      <Tr key={karyawan.ID}>
        <Td>{karyawan.nik}</Td>
        <Td>{karyawan.nama_petugas}</Td>
        <Td>{karyawan.username}</Td>
        <Td>{karyawan.telp}</Td>
      </Tr>
    ));
  };

  return (
    <>
      <Head>
        <title>GO Kasir</title>
        <meta name="description" content="Generated by create next app" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <main>
        <Container>
          <Heading>Hello World</Heading>
          {loading ? <Spinner size="xl" /> : null}
          <Table>
            <Thead>
              <Tr>
                <Th>Nik</Th>
                <Th>Nama Petugas</Th>
                <Th>Username</Th>
                <Th>Telp</Th>
              </Tr>
            </Thead>
            <Tbody>{renderKaryawan()}</Tbody>
          </Table>
        </Container>
      </main>
    </>
  );
}
